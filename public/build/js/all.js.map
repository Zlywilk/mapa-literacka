{"version":3,"sources":["map.js","jquery.colorbox-min.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxiBA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["/*global $,google */\r\nfunction initMap() {\r\n    'use strict';\r\n    var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',\r\n        labelIndex = 0,\r\n        geocoder = new google.maps.Geocoder(),\r\n        mapOptions = {\r\n            zoom: 14,\r\n            center: new google.maps.LatLng(53.0137902, 18.5984437),\r\n            disableDefaultUI: true,\r\n            scrollwheel: true,\r\n            draggable: true,\r\n            zoomControl: true,\r\n            fullscreenControl: true\r\n        },\r\n        mapElement = document.getElementById('map'),\r\n        theMap = new google.maps.Map(mapElement, mapOptions),\r\n        beachMarker = {\r\n            1: [],\r\n            2: [],\r\n            3: [],\r\n            4: [],\r\n            5: [],\r\n            6: [],\r\n            7: [],\r\n            8: [],\r\n            9: [],\r\n            10: []\r\n        },\r\n        markersadd = [],\r\n        lastmarkerid = null,\r\n        panelname =\r\n'<span class=\"pull-right cancel clickable\"> <i class=\"fa fa-times\"></i></span>',\r\n        markerGoPoint;\r\n\r\n    function lastid(lid) {\r\n        var i = 0,\r\n            opis, repair, pozycja, markertitle, markerid, type, image, typ,\r\n            userid, markerimage, addres, bazamarkerow;\r\n        $.get('lastid/' + lid, function(data) {\r\n            var datl = data.length;\r\n            for (i; i < datl; i++) {\r\n                pozycja = new google.maps.LatLng(data[i].latitude,\r\n                                                 data[i].longitude);\r\n                markertitle = data[i].title;\r\n                markerid = data[i].id;\r\n                type = data[i].type;\r\n                userid = data[i].user_id;\r\n                opis = data[i].opis;\r\n                markerimage = data[i].image;\r\n                repair = data[i].repair;\r\n                addres = data[i].addres;\r\n                image = {\r\n                    url: data[i].gfx,\r\n                    size: new google.maps.Size(40, 40),\r\n                    origin: null,\r\n                    anchor: null\r\n                };\r\n                if (datl - 1 === i) {\r\n                    lastmarkerid = data[i].id;\r\n                }\r\n\r\n                bazamarkerow = new google.maps.Marker({\r\n                    position: pozycja,\r\n                    map: theMap,\r\n                    icon: image,\r\n                    title: markertitle,\r\n                    id: markerid,\r\n                    image: markerimage,\r\n                    type: type,\r\n                    opis: opis,\r\n                    repair: repair,\r\n                    addres: addres\r\n                });\r\n                bindInfoWindow(bazamarkerow, theMap);\r\n                typ = bazamarkerow.type;\r\n                beachMarker[typ].push(bazamarkerow);\r\n            }\r\n\r\n        });\r\n    }\r\n    lastid(lastmarkerid);\r\n    var bindInfoWindow = function(bazamarkerow, theMap) {\r\n        google.maps.event.addListener(bazamarkerow, 'click', function() {\r\n            var markercontent = '<h4 style=\"margin:2px \">' +\r\n            bazamarkerow.title + '</h4><p style=\"margin:0px\">' +\r\n            bazamarkerow.opis + '</p>';\r\n            if (bazamarkerow.image !== undefined) {\r\n                var markerimage = '<img src=\"' +\r\n                    bazamarkerow.image + '\" alt=\"' +\r\n                bazamarkerow.title + '\">';\r\n                markercontent = markercontent + markerimage;\r\n            }\r\n            var infowindow = new google.maps.InfoWindow({\r\n                content: markercontent\r\n            });\r\n            infowindow.open(theMap, bazamarkerow);\r\n            if ($('#roleid').val() === '2' ||\r\n                $('#userid').val() === bazamarkerow.userid) {\r\n                var editid = $('.panelholding').length;\r\n                bazamarkerow.setDraggable(true);\r\n                var counteditwindows = $('.edit').length;\r\n                if (counteditwindows >= 1) {\r\n                    var e = 0, i = 0;\r\n                    for (e; counteditwindows >= e; e++) {\r\n                if ($('.editid').eq(e).val() === bazamarkerow.id.toString()) {\r\n                            ++i;\r\n                        }\r\n                        if (i === 0) {\r\n                            edit(bazamarkerow);\r\n                        }\r\n                    }\r\n                } else {\r\n                    {\r\n                        bazamarkerow.editid = editid;\r\n                        edit(bazamarkerow);\r\n                    }\r\n                }\r\n            } else {\r\n                bazamarkerow.setDraggable(false);\r\n            }\r\n\r\n        });\r\n        google.maps.event.addListener(bazamarkerow, 'dragend', function (event)\r\n                                      {\r\n            var editid = this.editid;\r\n            getgeo(event.latLng, 0, editid);\r\n        });\r\n    };\r\n\r\n    function toggleGroup(type) {\r\n        var markersInArray=beachMarker[type].length;\r\n        for (var i = 0; i < markersInArray; i++) {\r\n            var marker = beachMarker[type][i];\r\n            if (!marker.getVisible()) {\r\n                marker.setVisible(true);\r\n            } else {\r\n                marker.setVisible(false);\r\n            }\r\n        }\r\n    }\r\n\r\n    function visableOnOf(visable) {\r\n        for (var i = 1; i <= 10; i++) {\r\n            var jd = beachMarker[i].length;\r\n            for (var j = 0; j < jd; j++) {\r\n                var marker = beachMarker[i][j];\r\n                if(visable===0){\r\n                    marker.setVisible(true);\r\n                }else{\r\n                    marker.setVisible(false);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    $('body').on('change', '#cboxLoadedContent input', function () {\r\n        toggleGroup(this.value);\r\n    });\r\n    var idl = document.getElementById('legend');\r\n    theMap.controls[google.maps.ControlPosition.TOP_CENTER].push(idl);\r\n    $('#toggle').click(function () {\r\n        $('#sidebar-wrapper').toggleClass('hide');\r\n    });\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n        }\r\n    });\r\n    $('.ajax').on('click', function (e) {\r\n        e.preventDefault();\r\n        $('.ajax').colorbox({\r\n            top: 50,\r\n            left: 50\r\n        });\r\n        visableOnOf(0);\r\n        if(typeof markerGoPoint !== 'undefined'){\r\n            markerGoPoint.setMap(null);\r\n        }\r\n\r\n    });\r\n      $('body').on('click', '.go-point', function (e) {\r\n          visableOnOf(1);\r\n         var goPoint=this.getAttribute(\"href\").split(',');\r\n          var goGPS = new google.maps.LatLng(goPoint[0],goPoint[1]);\r\n\r\n           markerGoPoint = new google.maps.Marker({\r\n    position: goGPS,\r\n    map: theMap,\r\n    title: goPoint[2]\r\n  });\r\n          theMap.setCenter(goGPS);\r\n          $(window).colorbox.close();\r\n          e.preventDefault();\r\n        });\r\n    function sendajax(formdata, method) {\r\n        if (arguments[2] !== undefined)\r\n            var agr = arguments[2];\r\n        $.ajax({\r\n            type: method,\r\n            url: 'markers',\r\n            contentType: 'aplication/json',\r\n            data: formdata,\r\n            success: function (data) {\r\n                if (method === \"POST\")\r\n                    $('.globalmesage').addClass('alert-success').\r\n                    append('melduje wykonanie zadania markery zostały dodane')\r\n                        .fadeIn();\r\n                if (method === \"DELETE\")\r\n                    $('.globalmesage').addClass('alert-success').\r\n                    append('Bomba usunąłem marker ale już go nie odzyskasz :D')\r\n                        .fadeIn();\r\n                if (method === \"PATCH\")\r\n                    $('.globalmesage').addClass('alert-success').\r\n                    append('exh znów coś chcesz? <br> No nic musze to zrobić w \\\r\nkońcu jestem programaem gotowe markery edytowane').fadeIn();\r\n                if (agr !== undefined) {\r\n                    deletemarker(agr);\r\n                    lastid(lastmarkerid);\r\n                } else {\r\n                    if (method !== \"PATCH\") {\r\n                        deletemarker(\"all\");\r\n                        lastid(lastmarkerid);\r\n                    }\r\n                }\r\n            }\r\n        }).fail(function (data) {\r\n            if (data.status === 500) {\r\n                $('.globalmesage').addClass('alert-danger').\r\n                html('coś poszło nie tak nasze minionki juz pracują nad \\\r\nrozwizaniem problemu :)').fadeIn();\r\n                return;\r\n            }\r\n            var errors = data.responseJSON;\r\n            $.each(errors, function (index, value) {\r\n                var split = index.split('.');\r\n                if (agr !== undefined)\r\n                    split[1] = agr;\r\n\r\n                if (split[1] === undefined) {\r\n                    split[1] = 0;\r\n                }\r\n                $('.error' + split[1]).append(value);\r\n                $('.error' + split[1]).fadeIn();\r\n            });\r\n        });\r\n    }\r\n\r\n    function restoreerror($form, $isEdit) {\r\n        var iloscokien = $('.panelholding').length - 1;\r\n        $('.panelholding:last').attr('id', iloscokien);\r\n        if ($isEdit === \"1\") {\r\n            $form.find('.deltable').val('');\r\n            $form.find('input[type=\"checkbox\"]').prop('checked', false);\r\n            $form.find('.repair').val('0');\r\n            $form.find('.alert-danger').hide();\r\n            $form.find('.alert-danger').empty();\r\n            $form.find('.alert-danger').attr('class', 'error' + iloscokien +\r\n                                             ' alert alert-danger');\r\n        }\r\n    }\r\n\r\n    function edit($marker) {\r\n        if ($('.latitude').val() === \"\") {\r\n            $('.panelholding').removeClass('addnewmarker');\r\n            $('.panel-heading').addClass('edit').html($marker.title + panelname);\r\n            $('.panel-body').find('.btn-group').\r\n            append('<button type=\"button\" data-dismiss=\"modal\" \\\r\nclass=\"btn btn-sm btn-default destroy\" >usuń</button>');\r\n            $('.panel-body').find('.form-group').\r\n            append('<input class=\"form-control editid\" name=\"editid\"  \\\r\ntype=\"hidden\" >');\r\n            $('.panel-body').find('.title').val($marker.title);\r\n            $('.panel-body').find('.addres').val($marker.addres);\r\n            $('.panel-body').find('.opis').val($marker.opis);\r\n            $('.panel-body').find('.editid').val($marker.id);\r\n            $('.panel-body').find('.send').removeClass('send').\r\n            addClass('editsend');\r\n            $('.panel-body').find('.type').val($marker.type);\r\n            $('.panel-body').find('.repair').val($marker.repair);\r\n            $('.panel-body').find('.latitude').val($marker.position.lat());\r\n            $('.panel-body').find('.longitude').val($marker.position.lng());\r\n\r\n        } else {\r\n            var editMenu = $('.panelholding:first').clone();\r\n            if (editMenu.hasClass('addnewmarker')) {\r\n                editMenu.find('.btn-group').append('<button type=\"button\" \\\r\ndata-dismiss=\"modal\" class=\"btn btn-sm btn-default destroy\" >usuń</button>');\r\n                editMenu.find('.form-group').\r\n                append('<input class=\"form-control editid\" name=\"editid\"  \\\r\ntype=\"hidden\" >');\r\n                editMenu.removeClass('addnewmarker');\r\n            }\r\n\r\n            editMenu.find('.panel-heading').addClass('edit')\r\n            .html($marker.title + panelname);\r\n            editMenu.find('.title').val($marker.title);\r\n            editMenu.find('.addres').val($marker.addres);\r\n            editMenu.find('.opis').val($marker.opis);\r\n            editMenu.find('.editid').val($marker.id);\r\n            editMenu.find('.send').removeClass('send').addClass('editsend');\r\n            editMenu.find('.type').val($marker.type);\r\n            editMenu.find('.repair').val($marker.repair);\r\n            editMenu.find('.latitude').val($marker.position.lat());\r\n            editMenu.find('.longitude').val($marker.position.lng());\r\n            $('.all').before(editMenu);\r\n            restoreerror(editMenu, 0);\r\n        }\r\n        $('body').on('click', '.destroy', function (e) {\r\n            e.preventDefault();\r\n            var $markerid = $(this).closest('.panel-body').find('.editid').val();\r\n\r\n            $('.modal').modal()\r\n                .one('click', '#destroy', function (e) {\r\n             sendajax($markerid, 'DELETE');\r\n             $('.globalmesage').addClass('alert-success')\r\n            .html('Bomba usunąłem marker ale już go nie odzyskasz :D').fadeIn();\r\n            $marker.setMap(null);\r\n            $('.close').click();\r\n\r\n                });\r\n        });\r\n    }\r\n\r\n    function getgeo(pos, typ, id) {\r\n        var geotype, byaddress;\r\n        if (typeof pos == 'string') {\r\n            geotype = {\r\n                'address': pos\r\n            };\r\n            byaddress = 1;\r\n\r\n        } else {\r\n            geotype = {\r\n                'latLng': pos\r\n            };\r\n            byaddress = 0;\r\n        }\r\n        geocoder.geocode(geotype, function (results, status) {\r\n            if (status == google.maps.GeocoderStatus.OK) {\r\n                if (byaddress === 1) {\r\n                    addMarker(results[0].geometry.location, theMap);\r\n                    return;\r\n                }\r\n                theMap.setCenter(results[0].geometry.location);\r\n                var lat = results[0].geometry.location.lat();\r\n                var lng = results[0].geometry.location.lng();\r\n                $(\"input[name='latitude']\").eq(id).val(lat);\r\n                $(\"input[name='longitude']\").eq(id).val(lng);\r\n                $('.addres').eq(id).val(results[0].formatted_address);\r\n            }\r\n        });\r\n    }\r\n\r\n    function removevalue() {\r\n            $('.panel-heading').eq(0).html('marker' + panelname);\r\n            $('.deltable').val('');\r\n            $('input[type=\"checkbox\"]').prop('checked', false);\r\n            $('.repair').val(0);\r\n            $('.type').val(null);\r\n        }\r\n        //TODO: look up to this fuction not sure if work  correctly\r\n    function deletemarker(index) {\r\n        var formclose = $('.panelholding'),\r\n            iloscpaneli = formclose.length;\r\n        if (index === \"all\") {\r\n            var addnewmarker = $('.addnewmarker');\r\n            addnewmarker.each(function (index) {\r\n                markersadd[index].setMap(null);\r\n            });\r\n\r\n            for (var i = 1; i < iloscpaneli; i++) {\r\n                formclose.eq(i).remove();\r\n\r\n            }\r\n            removevalue();\r\n            if (markersadd.length > 0)\r\n                markersadd[0].setMap(null);\r\n            markersadd.splice(0, iloscpaneli);\r\n            labelIndex = 0;\r\n            return;\r\n        }\r\n        if (iloscpaneli === 1) {\r\n            removevalue();\r\n            if (markersadd.length === 1)\r\n                markersadd[index].setMap(null);\r\n            markersadd.splice(index, 1);\r\n            labelIndex = 0;\r\n            return;\r\n        }\r\n        $(index).fadeOut();\r\n        formclose[index].remove();\r\n        if (formclose.eq(index).hasClass('addnewmarker')) {\r\n            markersadd[index].setMap(null);\r\n            markersadd.splice(index, 1);\r\n        }\r\n        var e = index,\r\n            panelclose = $('.panelholding'),\r\n            countpanels = panelclose.length;\r\n        for (e; e < countpanels; e++) {\r\n            panelclose.eq(e).attr('id', e);\r\n            markersadd[e].id = e;\r\n        }\r\n    }\r\n\r\n    function addMarker(location, map) {\r\n        var iloscmarkerow = markersadd.length,\r\n            countMarker = $('.addnewmarker').length,\r\n            iloscokien = $('.panelholding').length,\r\n            markeraddmenu = $('.panelholding:first').clone(),\r\n            marker = new google.maps.Marker({\r\n                id: iloscokien - 1,\r\n                position: location,\r\n                label: labels[labelIndex++ % labels.length],\r\n                map: theMap,\r\n                draggable: true\r\n            });\r\n\r\n\r\n\r\n        markersadd.push(marker);\r\n        theMap.setCenter(location);\r\n        google.maps.event.addListener(marker, 'dragend', function (event) {\r\n            var id = this.id;\r\n            getgeo(event.latLng, 0, id);\r\n        });\r\n\r\n\r\n        if (countMarker >= 0) {\r\n            if (markeraddmenu.find('.panel-heading:first').hasClass('edit')) {\r\n                markeraddmenu.addClass('addnewmarker');\r\n                markeraddmenu.find('.edit').removeClass('edit');\r\n                markeraddmenu.find('.destroy').remove();\r\n                markeraddmenu.find('.editsend')\r\n                    .attr('class', 'btn btn-sm btn-default clickable send');\r\n                markeraddmenu.find('.panel-heading').html('marker' + panelname);\r\n                $('.editid').remove();\r\n            }\r\n            if (iloscmarkerow > 0 || $('.edit').length === 1) {\r\n                $('.all').before(markeraddmenu);\r\n                restoreerror(markeraddmenu, 1);\r\n            }\r\n\r\n        }\r\n        getgeo(location, 0, $('.panelholding').length - 1);\r\n\r\n\r\n    }\r\n    if ($('.city').html() === 'Idź do UL.') {\r\n        $('body').on('change', '.required', function () {\r\n            var fclosed = $(this).closest('.panel-body');\r\n            if (this.type === 'text')\r\n                fclosed.prev().html(this.value + panelname);\r\n            fclosed.find('.alert-danger').fadeOut();\r\n\r\n        });\r\n        google.maps.event.addListener(theMap, 'click', function (event) {\r\n            addMarker(event.latLng, theMap);\r\n        });\r\n        $('.city').click(function (e) {\r\n            e.preventDefault();\r\n            var city = $('#city').val() + ',87-100 Toruń';\r\n            getgeo(city, 1);\r\n        });\r\n        $('body').on('click', '.panel-heading', function () {\r\n            $(this).next('div').slideToggle('slow');\r\n        });\r\n        $('body').on('click', '.clickable', function (e) {\r\n            var formclose = $(this).closest('.panelholding'),\r\n                formcloseid = formclose.attr('id'),\r\n                formallcalue = $('.addnewmarker'),\r\n                countofedit;\r\n            e.preventDefault();\r\n            if ($(this).hasClass('cancel')) {\r\n                deletemarker(formcloseid);\r\n            } else if ($(this).hasClass('cancelall')) {\r\n                deletemarker(\"all\");\r\n            } else if ($(this).hasClass('send')) {\r\n\r\n                formclose.find('.alert-danger').empty();\r\n              var fd=new FormData();\r\n              fd.append('image',$('input:file'));\r\nconsole.log(fd.get('image'));\r\n                sendajax(data, 'post', formcloseid);\r\n            } else if ($(this).hasClass('sendall')) {\r\n                $('.alert').fadeOut('fast', function () {\r\n                    $(this).html('');\r\n                });\r\n                $('.globalmesage').removeClass('alert-success, alert-danger');\r\n\r\n                var sendata = JSON.stringify(formallcalue.serializeObject());\r\n                sendajax(sendata, 'post'),\r\n               countofedit = $('.edit').length;\r\n                if (countofedit > 0) {\r\n                var datafromedit = $('.edit').next();\r\n                var datatojson = JSON.stringify(datafromedit.serializeObject());\r\n                    sendajax(datatojson, 'PATCH', formcloseid);\r\n\r\n                }\r\n            } else if ($(this).hasClass('editsend')) {\r\n                var $panel = $(this).closest('.panelholding');\r\n                var dataedit = JSON.stringify($panel.serializeObject());\r\n\r\n                sendajax(dataedit, 'PATCH');\r\n            }\r\n        });\r\n        $('body').on('change', '.form-checkbox', function () {\r\n            $(this).val(this.checked ? 1 : 0);\r\n        });\r\n        $.fn.serializeObject = function () {\r\n            var o = {};\r\n            var rules = 'input[type=\"hidden\"], input[type=\"text\"], \\\r\ninput[type=\"password\"], input[type=\"checkbox\"], input[type=\"radio\"]:checked \\\r\n    ,select, textarea';\r\n            $(this).find(rules).each(function () {\r\n                if ($(this).attr('type') == 'hidden') {\r\n                    var $parent = $(this).parent();\r\n                    var $chb = $parent.find('input[type=\"checkbox\"][name=\"' +\r\n                this.name.replace(/\\[/g, '\\\\[').replace(/\\]/g, '\\\\]') + '\"]');\r\n                    if ($chb !== null) {\r\n                        if ($chb.prop('checked')) return;\r\n                    }\r\n                }\r\n                if (this.name === null || this.name === undefined ||\r\n                    this.name === '')\r\n                    return;\r\n                var elemValue = null;\r\n                if ($(this).is('select'))\r\n                    elemValue = $(this).find('option:selected').val();\r\n                else elemValue = this.value;\r\n                if (o[this.name] !== undefined) {\r\n                    if (!o[this.name].push) {\r\n                        o[this.name] = [o[this.name]];\r\n                    }\r\n                    o[this.name].push(elemValue || '');\r\n                } else {\r\n                    o[this.name] = elemValue || '';\r\n                }\r\n            });\r\n            return o;\r\n        };\r\n    }\r\n    theMap.controls[google.maps.ControlPosition.TOP_LEFT].push();\r\n}\r\n        function loadScript()\r\n{\r\n  var script = document.createElement(\"script\");\r\n  script.type = \"text/javascript\";\r\n  script.src = \"http://maps.googleapis.com/maps/api/js?key=AIzaSyCYqomDlEk2ZSZ0KeV8LwWdhHHzlJNGhOA&callback=initMap\";\r\n  document.body.appendChild(script);\r\n}\r\n\r\nwindow.onload = loadScript;\r\n","/*!\r\n\tColorbox 1.6.3\r\n\tlicense: MIT\r\n\thttp://www.jacklmoore.com/colorbox\r\n*/\r\n(function(t,e,i){function n(i,n,o){var r=e.createElement(i);return n&&(r.id=Z+n),o&&(r.style.cssText=o),t(r)}function o(){return i.innerHeight?i.innerHeight:t(i).height()}function r(e,i){i!==Object(i)&&(i={}),this.cache={},this.el=e,this.value=function(e){var n;return void 0===this.cache[e]&&(n=t(this.el).attr(\"data-cbox-\"+e),void 0!==n?this.cache[e]=n:void 0!==i[e]?this.cache[e]=i[e]:void 0!==X[e]&&(this.cache[e]=X[e])),this.cache[e]},this.get=function(e){var i=this.value(e);return t.isFunction(i)?i.call(this.el,this):i}}function h(t){var e=W.length,i=(A+t)%e;return 0>i?e+i:i}function a(t,e){return Math.round((/%/.test(t)?(\"x\"===e?E.width():o())/100:1)*parseInt(t,10))}function s(t,e){return t.get(\"photo\")||t.get(\"photoRegex\").test(e)}function l(t,e){return t.get(\"retinaUrl\")&&i.devicePixelRatio>1?e.replace(t.get(\"photoRegex\"),t.get(\"retinaSuffix\")):e}function d(t){\"contains\"in x[0]&&!x[0].contains(t.target)&&t.target!==v[0]&&(t.stopPropagation(),x.focus())}function c(t){c.str!==t&&(x.add(v).removeClass(c.str).addClass(t),c.str=t)}function g(e){A=0,e&&e!==!1&&\"nofollow\"!==e?(W=t(\".\"+te).filter(function(){var i=t.data(this,Y),n=new r(this,i);return n.get(\"rel\")===e}),A=W.index(_.el),-1===A&&(W=W.add(_.el),A=W.length-1)):W=t(_.el)}function u(i){t(e).trigger(i),ae.triggerHandler(i)}function f(i){var o;if(!G){if(o=t(i).data(Y),_=new r(i,o),g(_.get(\"rel\")),!$){$=q=!0,c(_.get(\"className\")),x.css({visibility:\"hidden\",display:\"block\",opacity:\"\"}),I=n(se,\"LoadedContent\",\"width:0; height:0; overflow:hidden; visibility:hidden\"),b.css({width:\"\",height:\"\"}).append(I),j=T.height()+k.height()+b.outerHeight(!0)-b.height(),D=C.width()+H.width()+b.outerWidth(!0)-b.width(),N=I.outerHeight(!0),z=I.outerWidth(!0);var h=a(_.get(\"initialWidth\"),\"x\"),s=a(_.get(\"initialHeight\"),\"y\"),l=_.get(\"maxWidth\"),f=_.get(\"maxHeight\");_.w=Math.max((l!==!1?Math.min(h,a(l,\"x\")):h)-z-D,0),_.h=Math.max((f!==!1?Math.min(s,a(f,\"y\")):s)-N-j,0),I.css({width:\"\",height:_.h}),J.position(),u(ee),_.get(\"onOpen\"),O.add(F).hide(),x.focus(),_.get(\"trapFocus\")&&e.addEventListener&&(e.addEventListener(\"focus\",d,!0),ae.one(re,function(){e.removeEventListener(\"focus\",d,!0)})),_.get(\"returnFocus\")&&ae.one(re,function(){t(_.el).focus()})}var p=parseFloat(_.get(\"opacity\"));v.css({opacity:p===p?p:\"\",cursor:_.get(\"overlayClose\")?\"pointer\":\"\",visibility:\"visible\"}).show(),_.get(\"closeButton\")?B.html(_.get(\"close\")).appendTo(b):B.appendTo(\"<div/>\"),w()}}function p(){x||(V=!1,E=t(i),x=n(se).attr({id:Y,\"class\":t.support.opacity===!1?Z+\"IE\":\"\",role:\"dialog\",tabindex:\"-1\"}).hide(),v=n(se,\"Overlay\").hide(),L=t([n(se,\"LoadingOverlay\")[0],n(se,\"LoadingGraphic\")[0]]),y=n(se,\"Wrapper\"),b=n(se,\"Content\").append(F=n(se,\"Title\"),R=n(se,\"Current\"),P=t('<button type=\"button\"/>').attr({id:Z+\"Previous\"}),K=t('<button type=\"button\"/>').attr({id:Z+\"Next\"}),S=n(\"button\",\"Slideshow\"),L),B=t('<button type=\"button\"/>').attr({id:Z+\"Close\"}),y.append(n(se).append(n(se,\"TopLeft\"),T=n(se,\"TopCenter\"),n(se,\"TopRight\")),n(se,!1,\"clear:left\").append(C=n(se,\"MiddleLeft\"),b,H=n(se,\"MiddleRight\")),n(se,!1,\"clear:left\").append(n(se,\"BottomLeft\"),k=n(se,\"BottomCenter\"),n(se,\"BottomRight\"))).find(\"div div\").css({\"float\":\"left\"}),M=n(se,!1,\"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;\"),O=K.add(P).add(R).add(S)),e.body&&!x.parent().length&&t(e.body).append(v,x.append(y,M))}function m(){function i(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),f(this))}return x?(V||(V=!0,K.click(function(){J.next()}),P.click(function(){J.prev()}),B.click(function(){J.close()}),v.click(function(){_.get(\"overlayClose\")&&J.close()}),t(e).bind(\"keydown.\"+Z,function(t){var e=t.keyCode;$&&_.get(\"escKey\")&&27===e&&(t.preventDefault(),J.close()),$&&_.get(\"arrowKey\")&&W[1]&&!t.altKey&&(37===e?(t.preventDefault(),P.click()):39===e&&(t.preventDefault(),K.click()))}),t.isFunction(t.fn.on)?t(e).on(\"click.\"+Z,\".\"+te,i):t(\".\"+te).live(\"click.\"+Z,i)),!0):!1}function w(){var e,o,r,h=J.prep,d=++le;if(q=!0,U=!1,u(he),u(ie),_.get(\"onLoad\"),_.h=_.get(\"height\")?a(_.get(\"height\"),\"y\")-N-j:_.get(\"innerHeight\")&&a(_.get(\"innerHeight\"),\"y\"),_.w=_.get(\"width\")?a(_.get(\"width\"),\"x\")-z-D:_.get(\"innerWidth\")&&a(_.get(\"innerWidth\"),\"x\"),_.mw=_.w,_.mh=_.h,_.get(\"maxWidth\")&&(_.mw=a(_.get(\"maxWidth\"),\"x\")-z-D,_.mw=_.w&&_.w<_.mw?_.w:_.mw),_.get(\"maxHeight\")&&(_.mh=a(_.get(\"maxHeight\"),\"y\")-N-j,_.mh=_.h&&_.h<_.mh?_.h:_.mh),e=_.get(\"href\"),Q=setTimeout(function(){L.show()},100),_.get(\"inline\")){var c=t(e);r=t(\"<div>\").hide().insertBefore(c),ae.one(he,function(){r.replaceWith(c)}),h(c)}else _.get(\"iframe\")?h(\" \"):_.get(\"html\")?h(_.get(\"html\")):s(_,e)?(e=l(_,e),U=_.get(\"createImg\"),t(U).addClass(Z+\"Photo\").bind(\"error.\"+Z,function(){h(n(se,\"Error\").html(_.get(\"imgError\")))}).one(\"load\",function(){d===le&&setTimeout(function(){var e;_.get(\"retinaImage\")&&i.devicePixelRatio>1&&(U.height=U.height/i.devicePixelRatio,U.width=U.width/i.devicePixelRatio),_.get(\"scalePhotos\")&&(o=function(){U.height-=U.height*e,U.width-=U.width*e},_.mw&&U.width>_.mw&&(e=(U.width-_.mw)/U.width,o()),_.mh&&U.height>_.mh&&(e=(U.height-_.mh)/U.height,o())),_.h&&(U.style.marginTop=Math.max(_.mh-U.height,0)/2+\"px\"),W[1]&&(_.get(\"loop\")||W[A+1])&&(U.style.cursor=\"pointer\",t(U).bind(\"click.\"+Z,function(){J.next()})),U.style.width=U.width+\"px\",U.style.height=U.height+\"px\",h(U)},1)}),U.src=e):e&&M.load(e,_.get(\"data\"),function(e,i){d===le&&h(\"error\"===i?n(se,\"Error\").html(_.get(\"xhrError\")):t(this).contents())})}var v,x,y,b,T,C,H,k,W,E,I,M,L,F,R,S,K,P,B,O,_,j,D,N,z,A,U,$,q,G,Q,J,V,X={html:!1,photo:!1,iframe:!1,inline:!1,transition:\"elastic\",speed:300,fadeOut:300,width:!1,initialWidth:\"600\",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:\"450\",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:\"start slideshow\",slideshowStop:\"stop slideshow\",photoRegex:/\\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:\"@2x.$1\",current:\"image {current} of {total}\",previous:\"previous\",next:\"next\",close:\"close\",xhrError:\"This content failed to load.\",imgError:\"This image failed to load.\",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return t(this).attr(\"href\")},title:function(){return this.title},createImg:function(){var e=new Image,i=t(this).data(\"cbox-img-attrs\");return\"object\"==typeof i&&t.each(i,function(t,i){e[t]=i}),e},createIframe:function(){var i=e.createElement(\"iframe\"),n=t(this).data(\"cbox-iframe-attrs\");return\"object\"==typeof n&&t.each(n,function(t,e){i[t]=e}),\"frameBorder\"in i&&(i.frameBorder=0),\"allowTransparency\"in i&&(i.allowTransparency=\"true\"),i.name=(new Date).getTime(),i.allowFullscreen=!0,i}},Y=\"colorbox\",Z=\"cbox\",te=Z+\"Element\",ee=Z+\"_open\",ie=Z+\"_load\",ne=Z+\"_complete\",oe=Z+\"_cleanup\",re=Z+\"_closed\",he=Z+\"_purge\",ae=t(\"<a/>\"),se=\"div\",le=0,de={},ce=function(){function t(){clearTimeout(h)}function e(){(_.get(\"loop\")||W[A+1])&&(t(),h=setTimeout(J.next,_.get(\"slideshowSpeed\")))}function i(){S.html(_.get(\"slideshowStop\")).unbind(s).one(s,n),ae.bind(ne,e).bind(ie,t),x.removeClass(a+\"off\").addClass(a+\"on\")}function n(){t(),ae.unbind(ne,e).unbind(ie,t),S.html(_.get(\"slideshowStart\")).unbind(s).one(s,function(){J.next(),i()}),x.removeClass(a+\"on\").addClass(a+\"off\")}function o(){r=!1,S.hide(),t(),ae.unbind(ne,e).unbind(ie,t),x.removeClass(a+\"off \"+a+\"on\")}var r,h,a=Z+\"Slideshow_\",s=\"click.\"+Z;return function(){r?_.get(\"slideshow\")||(ae.unbind(oe,o),o()):_.get(\"slideshow\")&&W[1]&&(r=!0,ae.one(oe,o),_.get(\"slideshowAuto\")?i():n(),S.show())}}();t[Y]||(t(p),J=t.fn[Y]=t[Y]=function(e,i){var n,o=this;return e=e||{},t.isFunction(o)&&(o=t(\"<a/>\"),e.open=!0),o[0]?(p(),m()&&(i&&(e.onComplete=i),o.each(function(){var i=t.data(this,Y)||{};t.data(this,Y,t.extend(i,e))}).addClass(te),n=new r(o[0],e),n.get(\"open\")&&f(o[0])),o):o},J.position=function(e,i){function n(){T[0].style.width=k[0].style.width=b[0].style.width=parseInt(x[0].style.width,10)-D+\"px\",b[0].style.height=C[0].style.height=H[0].style.height=parseInt(x[0].style.height,10)-j+\"px\"}var r,h,s,l=0,d=0,c=x.offset();if(E.unbind(\"resize.\"+Z),x.css({top:-9e4,left:-9e4}),h=E.scrollTop(),s=E.scrollLeft(),_.get(\"fixed\")?(c.top-=h,c.left-=s,x.css({position:\"fixed\"})):(l=h,d=s,x.css({position:\"absolute\"})),d+=_.get(\"right\")!==!1?Math.max(E.width()-_.w-z-D-a(_.get(\"right\"),\"x\"),0):_.get(\"left\")!==!1?a(_.get(\"left\"),\"x\"):Math.round(Math.max(E.width()-_.w-z-D,0)/2),l+=_.get(\"bottom\")!==!1?Math.max(o()-_.h-N-j-a(_.get(\"bottom\"),\"y\"),0):_.get(\"top\")!==!1?a(_.get(\"top\"),\"y\"):Math.round(Math.max(o()-_.h-N-j,0)/2),x.css({top:c.top,left:c.left,visibility:\"visible\"}),y[0].style.width=y[0].style.height=\"9999px\",r={width:_.w+z+D,height:_.h+N+j,top:l,left:d},e){var g=0;t.each(r,function(t){return r[t]!==de[t]?(g=e,void 0):void 0}),e=g}de=r,e||x.css(r),x.dequeue().animate(r,{duration:e||0,complete:function(){n(),q=!1,y[0].style.width=_.w+z+D+\"px\",y[0].style.height=_.h+N+j+\"px\",_.get(\"reposition\")&&setTimeout(function(){E.bind(\"resize.\"+Z,J.position)},1),t.isFunction(i)&&i()},step:n})},J.resize=function(t){var e;$&&(t=t||{},t.width&&(_.w=a(t.width,\"x\")-z-D),t.innerWidth&&(_.w=a(t.innerWidth,\"x\")),I.css({width:_.w}),t.height&&(_.h=a(t.height,\"y\")-N-j),t.innerHeight&&(_.h=a(t.innerHeight,\"y\")),t.innerHeight||t.height||(e=I.scrollTop(),I.css({height:\"auto\"}),_.h=I.height()),I.css({height:_.h}),e&&I.scrollTop(e),J.position(\"none\"===_.get(\"transition\")?0:_.get(\"speed\")))},J.prep=function(i){function o(){return _.w=_.w||I.width(),_.w=_.mw&&_.mw<_.w?_.mw:_.w,_.w}function a(){return _.h=_.h||I.height(),_.h=_.mh&&_.mh<_.h?_.mh:_.h,_.h}if($){var d,g=\"none\"===_.get(\"transition\")?0:_.get(\"speed\");I.remove(),I=n(se,\"LoadedContent\").append(i),I.hide().appendTo(M.show()).css({width:o(),overflow:_.get(\"scrolling\")?\"auto\":\"hidden\"}).css({height:a()}).prependTo(b),M.hide(),t(U).css({\"float\":\"none\"}),c(_.get(\"className\")),d=function(){function i(){t.support.opacity===!1&&x[0].style.removeAttribute(\"filter\")}var n,o,a=W.length;$&&(o=function(){clearTimeout(Q),L.hide(),u(ne),_.get(\"onComplete\")},F.html(_.get(\"title\")).show(),I.show(),a>1?(\"string\"==typeof _.get(\"current\")&&R.html(_.get(\"current\").replace(\"{current}\",A+1).replace(\"{total}\",a)).show(),K[_.get(\"loop\")||a-1>A?\"show\":\"hide\"]().html(_.get(\"next\")),P[_.get(\"loop\")||A?\"show\":\"hide\"]().html(_.get(\"previous\")),ce(),_.get(\"preloading\")&&t.each([h(-1),h(1)],function(){var i,n=W[this],o=new r(n,t.data(n,Y)),h=o.get(\"href\");h&&s(o,h)&&(h=l(o,h),i=e.createElement(\"img\"),i.src=h)})):O.hide(),_.get(\"iframe\")?(n=_.get(\"createIframe\"),_.get(\"scrolling\")||(n.scrolling=\"no\"),t(n).attr({src:_.get(\"href\"),\"class\":Z+\"Iframe\"}).one(\"load\",o).appendTo(I),ae.one(he,function(){n.src=\"//about:blank\"}),_.get(\"fastIframe\")&&t(n).trigger(\"load\")):o(),\"fade\"===_.get(\"transition\")?x.fadeTo(g,1,i):i())},\"fade\"===_.get(\"transition\")?x.fadeTo(g,0,function(){J.position(0,d)}):J.position(g,d)}},J.next=function(){!q&&W[1]&&(_.get(\"loop\")||W[A+1])&&(A=h(1),f(W[A]))},J.prev=function(){!q&&W[1]&&(_.get(\"loop\")||A)&&(A=h(-1),f(W[A]))},J.close=function(){$&&!G&&(G=!0,$=!1,u(oe),_.get(\"onCleanup\"),E.unbind(\".\"+Z),v.fadeTo(_.get(\"fadeOut\")||0,0),x.stop().fadeTo(_.get(\"fadeOut\")||0,0,function(){x.hide(),v.hide(),u(he),I.remove(),setTimeout(function(){G=!1,u(re),_.get(\"onClosed\")},1)}))},J.remove=function(){x&&(x.stop(),t[Y].close(),x.stop(!1,!0).remove(),v.remove(),G=!1,x=null,t(\".\"+te).removeData(Y).removeClass(te),t(e).unbind(\"click.\"+Z).unbind(\"keydown.\"+Z))},J.element=function(){return t(_.el)},J.settings=X)})(jQuery,document,window);"],"sourceRoot":"/source/"}